$(document).ready(function(){tabTop();main()});function tabTop(){$("#tabTop a").click(function(){var a=$(this).attr("id").substring(4);var b="account."+a+".php";$("#settingsContainer").hide();$("#loading").show();$("#settingsContainer").load(b,{},function(){$("#loading").hide();$(this).hide().fadeIn(500);window[a]()})})}function main(){$("#availCheck").click(function(){var b=$(this).siblings(".inputText").val();$.post("ajax.account.php",{availCheck:"true",username:b},function(d){var e=d.success;var c=d.response;if(e=="yes"){$("#availRe").css("color","#69AC66")}else{if(e=="no"){$("#availRe").css("color","#C24545")}else{if(e=="same"){$("#availRe").css("color","#333333")}}}$("#availRe").html("<span style='color: #555555;'> | </span>"+c)},"json");return false});fileInput();$("#generalForm").submit(function(){var b=$("[name='profileImg']").val();if($("input[name='username']").length==1){var c=new Array("firstname","lastname","username","hometown")}else{var c=new Array("firstname","lastname","hometown")}errorMsg="";if(validateField(c)){errorMsg=validateField(c)}if(validateEmail($("[name='email']"))){errorMsg=validateEmail($("[name='email']"))}if(validateFile(b)){errorMsg=validateFile(b)}if(errorMsg==""){$("#generalNoti").text("Updating...").show();$("#generalFrame").load(function(){var h=$("#generalFrame").contents().find("div#msg").text();$("#generalNoti").text(h).show();if($("[name='profileImg']").val()!=""){var d=parseInt($("#profileImg").attr("style").indexOf("users/p"))+7;var i=$("#profileImg").attr("style").indexOf(".jpg");var e=$("#profileImg").attr("style").substring(d,i);var g=new Date().getTime();var f="url(images/users/p"+e+".jpg?"+g+") no-repeat 50% 30%";$("#profileImg").css("background",f);$(".fileContainer .inputFile").val("");$(".fileContainer .fileText").val("")}return false})}else{$("#generalNoti").text(errorMsg).show();return false}});$("#passForm").submit(function(){var e=$(this).serialize()+"&updatePass=true";var d=$("[name='oldPass']").val().replace(/\s/g,"");var b=$("[name='newPass']").val().replace(/\s/g,"");var f=$("[name='newPassV']").val().replace(/\s/g,"");var c="";if(b!=f){c="New passwords don't match"}if(b==""){c="Please enter your new password"}if(d==""){c="Please enter your old password"}if(c==""){$.post("ajax.account.php",e,function(h){var g=h.response;$("#passNoti").text(g).show()},"json")}else{$("#passNoti").text(c).show()}return false});a("Look");a("Privacy");a("Noti");function a(c){var b=c.toLowerCase();$("#"+b+"Form").submit(function(){var d=$(this).serialize()+"&update"+c+"=true";$("#"+b+"Noti").show();$.post("ajax.account.php",d);return false})}}function network(){$(".networkList li").toggle(function(){var a=$(this).attr("value");$(this).addClass("current");$("<input type='hidden' name='network[]' value='"+a+"'/>").appendTo("#changeMajor")},function(){var a=$(this).attr("value");$(this).removeClass("current");$("#changeMajor input[value='"+a+"']").remove()});$("#changeMajor").submit(function(){if($("#changeMajor input").length>1){var a=$(this).serialize()+"&changeMajor=true";$(".networkList li.current").removeClass("current");$("#network #networkNoti").text("Major updated").show();$(this).html("<input type='submit' class='inputSubmit settingsSubmit' name='changeMajor' value='Update' />");$.post("ajax.account.php",a)}else{$("#network #networkNoti").text("Please select a major").show()}return false})}function field(){$("#fieldContainer li > ul:not(:first)").hide();$("#fieldContainer li:first").addClass("darkBorder");$(window).keydown(function(a){var b=a.which;if($("#fieldContainer ul:visible").length==1){if(b==38){a.preventDefault();$("li.darkBorder").prev("li").click()}else{if(b==40){a.preventDefault();$("li.darkBorder").next("li").click()}}}});$("#fieldContainer li").click(function(){var a=$(this).find("ul").is(":visible");if(!a){$(this).parent().find("li>ul:visible").slideToggle(800).parent("li").removeClass("darkBorder")}else{return}$(this).addClass("darkBorder");$(this).find("ul:first").slideToggle(800)});$("#fieldContainer i").toggle(function(){var a=$(this).attr("id");$(this).addClass("current");$("<input type='hidden' name='field[]' value='"+a+"'/>").appendTo("#addField")},function(){var a=$(this).attr("id");$(this).removeClass("current");$("#addField input[value='"+a+"']").remove()});$("#field #addField").submit(function(){if($("#addField input").length>1){var b=$(this).serialize()+"&addField=true";var a=($("#fieldContainer i.current").length>1)?"Fields Added":"Field Added";$("#add .fieldNoti").text(a).show();$(this).html("<input type='submit' class='inputSubmit settingsSubmit' name='addField' value='Add' />");$("#fieldContainer i.current").removeClass("current");$.post("ajax.account.php",b)}else{$("#add .fieldNoti").text("Please select a field").show()}return false});$("#remove li").toggle(function(){var a=$(this).attr("value");$(this).addClass("current");$("<input type='hidden' name='field[]' value='"+a+"'/>").appendTo("#removeField")},function(){var a=$(this).attr("value");$(this).removeClass("current");$("#removeField input[value='"+a+"']").remove()});$("#field #removeField").submit(function(){if($("#removeField input").length>1){var b=$(this).serialize()+"&removeField=true";var a=($("#remove .mediumList li.current").length>1)?"Fields Removed":"Field Removed";$("#remove .fieldNoti").text(a).show();$("#remove .mediumList li.current").hide();$(this).html("<input type='submit' class='inputSubmit settingsSubmit' name='removeField' value='Remove' />");$.post("ajax.account.php",b)}else{$("#remove .fieldNoti").text("Please select a field").show()}return false})}function group(){$("#group li").toggle(function(){var a=$(this).attr("value");$(this).addClass("current");$("<input type='hidden' name='group[]' value='"+a+"'/>").appendTo("#unblockForm")},function(){var a=$(this).attr("value");$(this).removeClass("current");$("#unblockForm input[value='"+a+"']").remove()});$("#group #unblockForm").submit(function(){if($("#unblockForm input").length>1){var b=$(this).serialize()+"&unblockGroup=true";var a=($("#group .mediumList li.current").length>1)?"Groups unblocked":"Group Unblocked";$("#groupNoti").text(a).show();$(this).siblings(".mediumList").children(".current").hide();$(this).html("<input type='submit' class='inputSubmit settingsSubmit' name='unblock' value='Unblock' />");$.post("ajax.account.php",b)}else{$("#groupNoti").text("Please select a group").show()}return false})};