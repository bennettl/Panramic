function groupSel(){$("#groupSel input[name='group']").keyup(function(b){var a=$(this);searchSuggest(b,a)});$("#groupSelForm").submit(function(){var a=$("#group").val();var b;if(a!=""){b="Administrator priveleges granted";$("input[name='group']").val("");$("#group").val("");$.post("ajax/ajax.groupSel.php",{groupSel:"true",groupId:a})}else{b="Invalid Group"}$("#groupSel .noti").text(b).show();return false})}function groupReq(){listOverlay("#groupReq","#confirmBox");$(".guestListContainer > div:not(':first')").hide();if($("#groupReq .mediumList > li").length==0){$("#groupReq #groupNoti").show()}$("#groupEditForm").submit(function(){var a=$(this).serialize()+"&editGroup=true";$.post("ajax.groupReq.php",a);$("#groupEditForm #resetForm").click();$("#groupEditForm [name='groupId']").removeAttr("value");$("#groupEditForm #groupName").text("");return false});$("#groupReq .confirmBtn").click(function(){var a=$("<li><div class='listNote'>Group Confirmed</div></li>");var b=$(this).parents("li").attr("value");$(this).parents("li").addClass("selected");$(this).parents("#confirmBox").appendTo("#groupReq").hide();$("#groupReq .selected").replaceWith(a);$.post("ajax.groupReq.php",{confirmGroup:"true",groupId:b})});$("#groupReq .deleteBox").click(function(){var a=$(this).parents("li").attr("value");$(this).parents("li").hide();$(this).parent().hide();$.post("ajax.groupReq.php",{ignoreGroup:"true",groupId:a})});$("#groupReq .editBtn").click(function(){var a=$(this).parents("li").attr("value");var b=$(this).siblings(".listName").text();$("#groupEditForm").fadeIn(500);$("#groupEditForm [name='groupId']").val(a);$("#groupName").text(b).hide().fadeIn(500);return false})}function eventReq(){$("[name='startDate'], [name='endDate']").live("focus",function(){$(this).datepicker()});listOverlay("#eventReq","#deleteList");if($("#evtList li").length==0){$("#eventReq .pageNoti").show()}$("#eventReq .miniEvt").live("click",function(){var a=$(this).next(".formList").clone(true,true);$("#deleteList").hide();$("#eventNoti").hide();$("#formContainer").show();$("#formContainer > li").replaceWith(a);a.fadeIn(500);adjustHeight("#formContainer [name='description']");textExpand("[name='description']");textCounter("[name='description']");$("#formContainer .guestListContainer > div:not(':first')").hide();return false});$("#eventReq .deleteBox").live("click",function(b){var c=$(window).scrollTop()+50;var a="Are you sure you want to remove this event?";b.stopPropagation();$(this).parents(".miniEvt").addClass("selected");$("#notiText").text(a);$("#notiMod").addClass("removeEvt").css({top:c+"px"}).show()});$(".evtForm .miniList i").live("mouseover",function(){var a=$(this).attr("class");var c=$(this).position().left;var b=$(this).position().top;$("#sideTip").appendTo("#leftContainer").css({top:b+2+"px",left:c+33+"px",display:"block"}).text(a)});$(".evtForm .miniList i").live("mouseout",function(){$("#sideTip").appendTo("#container").hide()});$("#formContainer [name='confirmEvent']").live("click",function(){var a=$("<li><div class='listNote'>Event Confirmed</div></li>");var b=parseInt($("#formContainer ,evtForm").find("input[name='eventId']").val());$.post("ajax/ajax.eventReq.php",{confirmEvent:"true",eventId:b});$(".mediumList li[value='"+b+"']").replaceWith(a);$("#formContainer").hide();return false});$("#formContainer [name='updateEvent']").live("click",function(){var a=$("#formContainer .evtForm");var e=a.find("input[name='name']").val();var d=new Array("name","location","description");errorMsg="";for(var c=0;c<d.length;c++){var b=a.find("[name='"+d[c]+"']").val().replace(/\s/g,"");if(b==""){errorMsg="Please enter your event "+d[c]}}if(e.length>40){errorMsg="Event name can't be longer than 40 characters"}if(a.find("[name='description']").val().length>2000){errorMsg="Description is too long"}if(parseInt($("[name='rsvpTime']").val())!=-1&&$("input[name='rsvpDate']").val()==""){errorMsg="Please select an rsvp date"}if(a.find("input[name='ongoing']:checked").val()=="no"&&a.find("input[name='startDate']").val()==""){errorMsg="Please select a start date"}if(errorMsg==""){var f=a.serialize()+"&updateEvent=true";$("#eventNoti").text("Processing...").show();$.post("ajax/ajax.eventReq.php",f,function(i){var h=i.response;$("#eventNoti").text(h).show();if(h.indexOf("success")>-1){$(".miniEvt[value='"+eventId+"'] .listName").text(e);var g=$("#formContainer .formList").clone(true,true).hide();$(".mediumList li[value='"+eventId+"']").next("li.formList").replaceWith(g);$(".mediumList li[value='"+eventId+"']").next("li.formList").find("[name='description']").css("height","40px")}},"json");return false}else{$("#eventNoti").text(errorMsg).show();return false}})}function masse(){textExpand("[name='message']");$("#masseForm").submit(function(){errorMsg="";var b=new Array("subject","message","password");emptyValidation(b,"none");if(errorMsg==""){var a=$(this).serialize()+"&masse=true";$("#masseNoti").text("Processing...").show();$.post("ajax/ajax.masse.php",a,function(d){var c=d.response;$("#masseNoti").text(c).show();if(c.indexOf("success")>-1){$("#masseReset").click()}},"json")}else{$("#masseNoti").text(errorMsg).show()}return false})}function report(){$(".reportSection").each(function(){if($(this).find("li").length==0){$(this).find(".pageNoti").show()}});$("#report .reportForm").submit(function(){var f=$(this).attr("name");var a=$(this).serialize()+"&"+f+"=true";var h=$("<li class='notification'>Report handled</li>");var g="";var e=$(this).children(":checked").length;var i=$(this).children("[name='ignore']:checked").length;var c=$(this).children("[name='remove']:checked").length;var b=$(this).children("[name='warn']:checked").length;var d=$(this).children("[name='ban']:checked").length;if(e==0){g="Please select an action"}if(i==1&&e>1){g="In order to ignore, you must uncheck other fields"}if(c==0&&(b==1||d==1)){g="Please check remove as well"}if(c==1&&b==0&&d==0){g="Please check warn or ban"}if(b==1&&d==1){g="Can't check both warn and ban"}if(g==""){$.post("ajax.report.php",a);$(this).parents("li.report").replaceWith(h)}else{$(this).next(".noti").text(g).show()}return false})};