function groupBuffer(){$("#groupBuffer .mediumList li").click(function(){var b=$(this).attr("value");var a=$("#sidenavTop a.current").attr("href").substring(1);var c="home."+a+".php";$("#loading").show();$("#contentContainer").load(c,{groupId:b},function(){$("#loading").hide();window[a]()}).hide().fadeIn(500)})}function postEvent(){$(".guestListContainer > div:not(':first')").hide();$("[name='rsvpDate'],[name='startDate'], [name='endDate']").live("focus",function(){$(this).datepicker()});textExpand("[name='description']");textCounter("[name='description']");toggleText(".fbText","Paste Event Url");$(".fbText").keyup(function(){var a=$(".fbText").val();var b=a.substr(parseInt(a.indexOf("eid"))+4);if(a.indexOf("www.facebook.com/event.php?eid=")>-1){FB.init({appId:"258940897480780",status:true,cookie:true,xfbml:true});FB.api("/"+b,function(i){var f=i.name;var d=i.location;var h=i.description;var e=i.start_time.substr(5,2)+"/"+i.start_time.substr(8,2)+"/"+i.start_time.substr(0,4);var c=i.end_time.substr(5,2)+"/"+i.end_time.substr(8,2)+"/"+i.end_time.substr(0,4);var j=i.start_time.substr(11);var g=i.end_time.substr(11);$(".fbText").blur();$("[name='name']").val(f);$("#endTimeBtn").click();$("[name='startDate']").val(e);$("[name='startTime'] [value='"+j+"']").attr("selected","selected");$("[name='endDate']").val(c);$("[name='endTime'] [value='"+g+"']").attr("selected","selected");$("[name='location']").val(d);$("[name='description']").val(h);adjustHeight("[name='description']");$(".fbText").addClass("inactiveText").val("Paste Event Url")})}});$("#endTimeBtn").click(function(){var a=$("[name='startDate']").val();$("#endDateRow").show();$("[name='endDate']").val(a);$(this).remove();return false});$("#rsvpBtn").click(function(){$("#rsvpDateRow").show();$(this).remove();return false});$("#previewBtn").click(function(){var a=$("#postEventForm .inputFile").val();errorMsg="";if(validateFile(a)){errorMsg=validateFile(a)}if(a==""){errorMsg="Please upload an image to preview"}if(errorMsg==""){$(".fileContainer .inputFile").appendTo($("#previewForm"));$(".fileContainer .noti").show();$("#previewForm").submit()}else{$("#eventNoti").text(errorMsg).show()}return false});$(".cancelBtn").click(function(){var c=$(".fileContainer .inputFile").val();if(c!=""){var b=$("[name='groupId']").val();var a="images/groups/m"+b+".jpg";$("#evtImg").attr("src",a)}});fileInput();$("#previewForm").submit(function(){$("#previewFrame").load(function(){var a=$("#previewFrame").contents().find("div#previewMsg").text();var b=$("#previewForm .inputFile");$(".fileContainer .noti").hide();$(".fileContainer .fileText").after(b);if(a.indexOf(".jpg")>-1){$("#evtImg").attr("src",a);$("#eventNoti").hide()}else{$("#eventNoti").text(a).show()}})});$("#postEventForm").submit(function(){var c=$("#postEventForm .inputFile").val();errorMsg="";if($("input[name='everyWeek']:checked").length==1){var a=parseInt($("input[name='startDate']").val().split("/")[0],10);if(a<8){errorMsg="Please select a month between August and December"}if($("input[name='startDate']").val().length==0){errorMsg="Please select a start date"}}var b=new Array("name","location","description");emptyValidation(b,"event");if($("input[name='name']").val().length>40){errorMsg="Event name can't be longer than 40 characters"}if($("[name='description']").val().length>2000){errorMsg="Description is too long"}if($("input[name='ongoing']:checked").length==1&&$("input[name='everyWeek']:checked").length==1){errorMsg="You cannot checked both every week and ongoing"}if($("input[name='ongoing']:checked").length==0&&$("input[name='startDate']").val().length==0){errorMsg="Please select a start date"}if(parseInt($("[name='rsvpTime']").val())!=-1&&$("input[name='rsvpDate']").val()==""){errorMsg="Please select an rsvp date"}if($("input[name='everyWeek']:checked").length==1&&$("input[name='rsvpDate']").val()!=""){errorMsg="You cannot RSVP every week events"}if($("input[name='network[]']:checked").length==0&&$("input[name='field[]']:checked").length==0&&$("input[name='memberOnly']:checked").length==0){errorMsg="Please select your guests"}if(validateFile(c)){errorMsg=validateFile(c)}if(errorMsg==""){$("#postEventFrame").load(function(){var f=$("#postEventFrame").contents().find("div#msg").text();$("#eventNoti").text(f).show();if(f.indexOf("success")>-1){var e=$("[name='groupId']").val();var d="images/groups/m"+e+".jpg";$("#postEventForm .descriptionText").height("40px");$("#formReset").click();$("#tab_guestNetwork").click();$("#evtImg").attr("src",d)}})}else{$("#eventNoti").text(errorMsg).show();return false}})}function memberReq(){listOverlay("#memberReq","#confirmBox");if($("#memberReq li").length==0){$("#memberReq #memberNoti").show()}$("#memberReq .confirmBtn").click(function(){var b=$("<li><div class='listNote'>Member Confirmed</div></li>");var a=$(this).parents("li").attr("value");$(this).parents("li").addClass("selected");$(this).parents("#confirmBox").appendTo("#memberReq").hide();$("#memberReq .selected").replaceWith(b);$.post("ajax/ajax.memberReq.php",{confirmMember:"true",memberId:a})});$("#memberReq .deleteBox").click(function(){var a=$(this).parents("li").attr("value");$(this).parents("li").hide();$(this).parent().hide();$.post("ajax/ajax.memberReq.php",{ignoreMember:"true",memberId:a})})}function groupManage(){$("[name='rsvpDate'], [name='startDate'], [name='endDate']").live("focus",(function(){$(this).datepicker()}));b();$("#groupManage #tabTop a").click(function(){var d=$(this).attr("id").substring(4);var e=$(this).attr("href").substring(1);var f="home.gm."+d+".php";$("#groupManage #groupContainer > div").hide();$("#loading").show();switch(d){case"about":$("#groupContainer").load(f,{groupId:e},function(){$("#loading").hide();$(this).hide().fadeIn(500);b()});break;case"events":$("#groupContainer").load(f,{groupId:e},function(){$("#loading").hide();$(this).hide().fadeIn(500);a()});break;case"member":$("#groupContainer").load(f,{groupId:e},function(){$("#loading").hide();$(this).hide().fadeIn(500);c()});break;default:break}});function b(){adjustHeight("#aboutUsForm [name='description']");textExpand("[name='description']");if($("#aboutUsForm [name='description']").val()==""){$("#aboutUsForm [name='description']").height("40px")}fileInput();$("#groupManage #aboutUsForm").submit(function(){var e="";if($("input[name='url']").length==1){var f=new Array("name","url","location")}else{var f=new Array("name","location")}if(validateField(f)){e=validateField(f)}if(validateEmail($("[name='email']"))){e=validateEmail($("[name='email']"))}if(e==""){var d=$(this).serialize()+"&aboutUsUpdate=true";$.post("ajax.groupManage.php",d,function(h){var g=h.response;$("#aboutNoti").text(g).show()},"json")}else{$("#aboutNoti").text(e).show()}return false});$("#groupManage #availCheck").click(function(){var d=$(this).siblings(".inputText").val();var e=$("input[name='groupId']").val();$.post("ajax.groupManage.php",{availCheckGroup:"true",url:d,groupId:e},function(g){var f=g.response;var h=g.success;if(h=="yes"){$("#availRe").css("color","#69ac66")}else{if(h=="no"){$("#availRe").css("color","#c24545")}else{if(h=="same"){$("#availRe").css("color","#333333")}}}$("#availRe").html("<span style='color:#555555;'> | </span>"+f)},"json");return false});$("#groupPhotoForm").submit(function(){errorMsg="";$(".inputFile").each(function(){var d=$(this).val();if(validateFile(d)){errorMsg=validateFile(d)}});if(errorMsg==""){$("#updateNoti").text("Uploading...").show();$("#photoFrame").load(function(){var d=$("input[name='groupId']").val();var e=new Date().getTime();var f=$("#photoFrame").contents().find("div#frameMsg").text();$("#updateNoti").text(f).show();var g=($("#updateNoti").text().indexOf("success")>-1)?true:false;$(".inputFile").each(function(){if($(this).val()!=""){var i=$(this).attr("name");if(i=="m"){var h="url(images/groups/"+i+d+".jpg?"+e+") no-repeat 50% 30%";$("#profileImg").css("background",h)}else{var h="images/groups/"+i+d+".jpg?"+e;$("#"+i).attr("src",h)}if(g){$(this).val("");$(this).prev(".fileText").val("")}}});return false})}else{$("#updateNoti").text(errorMsg).show();return false}})}function a(){listOverlay("#events","#deleteList");fileInput();if($("#evtList li").length==0){$("#events .pageNoti").show()}$("#evtTimeline a").click(function(){var f=$(this).attr("id").substr(4);var e=$(this).attr("href").substr(1);var d=$(this).parents("#timeline").next("#feedList").attr("class");$("#eventNoti").hide();$("#events #formContainer").hide();$("#loading").show();$("#deleteList").appendTo("#events");$.post("home.gm.events.php",{groupId:e,month:f},function(g){var h=g;$("#evtList").replaceWith(h);$("#loading").hide();$("#evtList").hide().fadeIn(500);if($("#evtList li").length==0){$("#events .pageNoti").fadeIn(500)}else{$("#events .pageNoti").hide()}},"html")});navCurrent("#evtTimeline","#evtTimeline a");$("#events .miniEvt").live("click",function(){var d=$(this).next(".formList").clone(true,true);$("#deleteList").hide();$("#eventNoti").hide();$("#formContainer").show();$("#formContainer > li").replaceWith(d);d.fadeIn(500);adjustHeight("#formContainer [name='description']");textExpand("[name='description']");textCounter("[name='description']");return false});$("#events .deleteBox").live("click",function(e){var f=$(window).scrollTop()+50;var d="Are you sure you want to remove this event?";e.stopPropagation();$(this).parents(".miniEvt").addClass("selected");$("#notiText").text(d);$("#notiMod").addClass("removeEvt").css({top:f+"px"}).show()});$(".evtForm .miniList i").live("mouseover",function(){var d=$(this).attr("class");var f=$(this).position().left;var e=$(this).position().top;$("#sideTip").appendTo("#leftContainer").css({top:e+2+"px",left:f+33+"px",display:"block"}).text(d)});$(".evtForm .miniList i").live("mouseout",function(){$("#sideTip").appendTo("#container").hide()});$("#groupManage .evtForm").live("submit",function(){var d=$(this);var j=d.find("input[name='name']").val();var h=d.find("input[name='evtImg']").val();var g=new Array("name","location","description");errorMsg="";for(var f=0;f<g.length;f++){var e=d.find("[name='"+g[f]+"']").val().replace(/\s/g,"");if(e==""){errorMsg="Please enter your event "+g[f]}}if(j.length>40){errorMsg="Event name can't be longer than 40 characters"}if(d.find("[name='description']").val().length>2000){errorMsg="Description is too long"}if(parseInt(d.find("[name='rsvpTime']").val())!=-1&&d.find("input[name='rsvpDate']").val()==""){errorMsg="Please select an rsvp date"}if(d.find("input[name='ongoing']:checked").val()=="no"&&d.find("input[name='startDate']").val()==""){errorMsg="Please select a start date"}if(validateFile(h)){errorMsg=validateFile(h)}if(errorMsg==""){$("#eventNoti").text("Processing...").show();$("#evtFormFrame").load(function(){var m=$("#formContainer [name='eventId']").val();var n=$("#evtFormFrame").contents().find("div#frameMsg").text();$("#eventNoti").text(n).show();$(".miniEvt[value='"+m+"'] .listName").text(j);if($("#formContainer [name='evtImg']").val()!=""){var l=new Date().getTime();var k="images/events/e"+m+".jpg?"+l;$("#formContainer .miniEvtImg").attr("src",k);$(".miniEvt[value='"+m+"'] img").attr("src",k)}var i=$("#formContainer li").clone(true,true).hide();$(".mediumList li[value='"+m+"']").next("li.formList").replaceWith(i);$(".mediumList li[value='"+m+"']").next("li.formList").find("[name='description']").css("height","40px");$(".inputFile").val("");$(".fileText").val("");return false})}else{$("#eventNoti").text(errorMsg).show();return false}})}function c(){$("#members .smallList img").hover(function(){var e=$(this).attr("alt");var g=$(this).position().left;var f=$(this).position().top;$("#sideTip").appendTo("#leftContainer").css({top:f+2+"px",left:g+36+"px"}).text(e).show()},function(){$("#sideTip").appendTo("#container").hide()});if($("#officerTable tr").length==2){$("#officerTable").css("visibility","hidden")}$("#updateOfficer").submit(function(){var e=$(this).serialize()+"&updateOfficer=true";$("#officerNoti").show();$.post("ajax.groupManage.php",e);return false});$(".memberText").keyup(function(){$("#members .guestListContainer *").show();var e=$(this).val().replace(/\s/g,"");if(e!=""){e=$(this).val().toLowerCase();$("#members .guestListContainer").find(".checkbox").each(function(){if($(this).text().toLowerCase().indexOf(e)==-1){$(this).parents("li").hide()}})}});toggleText(".memberText","Find...");$("#updateMember [name='removeMem']").click(function(){d("removeMem","Members removed")});$("#updateMember [name='makeMem']").click(function(){d("makeMem","Statuses updated")});$("#updateMember [name='makeOff']").click(function(){d("makeOff","Statuses updated")});$("#updateMember [name='makeAd']").click(function(){d("makeAd","Statuses updated")});$("#updateMember").submit(function(){return false});function d(e,g){var f=$("#updateMember").serialize()+"&"+e+"=true";$("#memberNoti").text(g).show();$("#updateMember input:checked").removeAttr("checked");$.post("ajax.groupManage.php",f);return false}}};